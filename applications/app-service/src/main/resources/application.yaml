server:
  port: 8080
spring:
  security:
    user:
      name: "admin"
      password: "admin123"
  profiles:
    active: "${SPRING_PROFILES_ACTIVE:local}"
  application:
    name: "autenticacion"
  devtools:
    add-properties: false
management:
  endpoints:
    web:
      exposure:
        include: "health,prometheus"
  endpoint:
    health:
      probes:
        enabled: true
  health:
    circuitbreakers:
      enabled: true
cors:
  allowed-origins: "http://localhost:4200,http://localhost:8080"
springdoc:
  api-docs.path: "/v3/api-docs"
  swagger-ui.path: "/swagger-ui"
  swagger-ui.operationsSorter: "method"
  swagger-ui.tagsSorter: "alpha"
logging:
  file:
    name: "logs/iam-app.log"
  level:
    root: "INFO"
    com.crediya.iam: "INFO"
    io.r2dbc.mysql: "WARN"
    org.springframework.r2dbc: "INFO"
    org.springframework.web.reactive.function.client.ExchangeFunctions: DEBUG
    org.springframework.http.client.reactive: DEBUG


adapters:
  r2dbc:
    host: "localhost"
    port: 3306
    database: "crediya_loan"
    username: "root"
    password: "rootpassword"

adapter:
  restconsumer:
    url: "http://localhost:8081"   # âœ… solo host y puerto
    timeout: 5000


security:
  secret: "cambia-esto-por-una-clave-de-32+bytes"
  expiration-sec: 3600
  issuer: "autenticacion-service"
  issuer-uri: ""

resilience4j:
  circuitbreaker:
    instances:
      testGet:
        registerHealthIndicator: true
        failureRateThreshold: 50
        slowCallRateThreshold: 50
        slowCallDurationThreshold: "2s"
        permittedNumberOfCallsInHalfOpenState: 3
        slidingWindowSize: 10
        minimumNumberOfCalls: 10
        waitDurationInOpenState: "10s"
      testPost:
        registerHealthIndicator: true
        failureRateThreshold: 50
        slowCallRateThreshold: 50
        slowCallDurationThreshold: "2s"
        permittedNumberOfCallsInHalfOpenState: 3
        slidingWindowSize: 10
        minimumNumberOfCalls: 10
        waitDurationInOpenState: "10s"
